<!DOCTYPE html>
<html lang="en">
<head>
    <script src="blog.js"></script>
    <script src="data.js"></script>

    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neuer Artikel</title>
    <link rel="icon" type="image/x-icon" href="/Media/favicon.png">  <!-- Favicon -->
     <!-- Bootstrap Import -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>

    <header></header>

      <br><br><br>

      <main>
      <form id="articleForm">


      <div class="container">
        <form id="articleForm">
            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="inputTitle" class="col-form-label">Überschrift</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="inputTitle" class="form-control">
                </div>
            </div>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="inputAuthor" class="col-form-label">Autor</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="inputAuthor" class="form-control">
                </div>
            </div>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="inputDate" class="col-form-label">Datum</label>
                </div>
                <div class="col-auto">
                    <input type="date" id="inputDate" class="form-control">
                </div>
            </div>

            <div class="mb-3">
                <label for="inputTeaser" class="form-label">Teaser Text</label>
                <textarea class="form-control" id="inputTeaser" rows="3"></textarea>
            </div>

            <div>
                <label for="inputArticle" class="form-label">Artikel</label>
                <textarea class="form-control" id="inputArticle" rows="10"></textarea>
            </div>

            <div class="row g-3 align-items-center">
                <div class="col-auto">
                    <label for="inputTags" class="col-form-label">Tags</label>
                </div>
                <div class="col-auto">
                    <input type="text" id="inputTags" class="form-control">
                </div>
                <div class="col-auto">
                    <button type="button" id="submitArticle" class="btn btn-primary">Senden</button>
                </div>
            </div>

         
    </form> 
</main>

<aside></aside> <!-- Seitenleiste -->

    <script>

        document.addEventListener("DOMContentLoaded", function () // Warten bis DOM vollständig geladen ist
        {
            // Footer + Header + Sidebar einfügen
            insertContent();
            
        });


      document.getElementById("submitArticle").addEventListener("click", function() {
          var title = document.getElementById("inputTitle").value;
          var author = document.getElementById("inputAuthor").value;
          var date = document.getElementById("inputDate").value;
          var teaser = document.getElementById("inputTeaser").value;
          var text = document.getElementById("inputArticle").value;
          var tags = document.getElementById("inputTags").value.split(",").map(tag => tag.trim());
          
          var newArticle = {
              ueberschrift: title,
              datum: date,
              autor: author,
              teaser: teaser,
              text: text,
              tags: tags
          };

          console.log("Neuer Artikel:", newArticle);
      });


        //ID aus Query String holen
        var url = window.location.href;
        var queryString = url.split('?')[1];
        var searchParams = new URLSearchParams(queryString);
        var id = searchParams.get("id");
        console.log(id); //Debugging

        //basierend auf ID den Index des Artikels auslesen
        var index = articles.findIndex(function(article) 
        {
        return article.id === id;
        });


        // Artkel basierend auf ID in Form laden
        var title = document.getElementById("inputTitle");
        var newText = articles[index].ueberschrift;
        title.value = newText;

        var title = document.getElementById("inputAuthor");
        var newText = articles[index].autor;
        title.value = newText;

        var title = document.getElementById("inputDate");
        var newText = articles[index].datum; //funktioniert nicht, da Input Feld des Typs "Date" wahrscheinlich
        title.value = newText;

        var title = document.getElementById("inputTeaser");
        var newText = articles[index].teaser;
        title.value = newText;

        var title = document.getElementById("inputArticle");
        var newText = articles[index].text;
        title.value = newText;

        var title = document.getElementById("inputTags");
        var newText = articles[index].tags.toString();
        title.value = newText;
        
        console.log("Artikel in Form eingefügt"); //Debugging

      

  </script>

  <footer></footer> <!-- Fußleiste -->
  
</body>
</html>